<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Morse Micro IoT SDK: mqttdemo.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="favicon.svg" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Morse Micro IoT SDK
   &#160;<span id="projectnumber">2.7.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('mqttdemo_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">mqttdemo.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >MQTT example to demonstrate connecting to an MQTT broker, subscribing to a topic and publishing to a topic. </p>
<dl class="section note"><dt>Note</dt><dd>It is assumed that you have followed the steps in the <a class="el" href="GETTING_STARTED.html">Getting Started</a> guide and are therefore familiar with how to build, flash, and monitor an application using the MM-IoT-SDK framework.</dd></dl>
<p><a class="el" href="mqttdemo_8c.html">mqttdemo.c</a> is an example application that demonstrates how to use coreMQTT to connect to an MQTT broker and publish/subscribe to messages. This example was written based on the tutorial at <a href="https://www.freertos.org/mqtt/basic-mqtt-example.html">https://www.freertos.org/mqtt/basic-mqtt-example.html</a>.</p>
<p >In this example we attempt to connect to the public MQTT broker at <code>test.mosquitto.org</code> on port 1883. This example connects on the clear, but can be easily converted to use TLS by supplying <code>NetworkCredentials_t</code> to <code>transport_connect()</code>.</p>
<dl class="section note"><dt>Note</dt><dd>This example is single threaded and so publishes &amp; subscribes in lock step in a single thread. If asynchronous publishes/subscribes are required, then this code will have to be modified to use a message queue and a single thread to handle the MQTT publishes/subscribes. Alternatively you may use the coreMQTT-Agent module which does this for you.</dd></dl>
<h1><a class="anchor" id="autotoc_md20"></a>
Getting Started</h1>
<h2><a class="anchor" id="autotoc_md21"></a>
Using the app only</h2>
<p >Simply compiling and running the application will show the application connecting to the public MQTT broker and then publishing a message to <code>"/MorseMicro/&lt;clientid&gt;/topic"</code> The <code>clientid</code> is unique to each device and in this example is based on the MAC address of the device.</p>
<p >The device also subscribes to the same topic, so if all is well you should see the message <em>G'day World</em> being displayed on the console.</p>
<dl class="section note"><dt>Note</dt><dd>This application requires internet connectivity and DNS to connect to the public MQTT broker. Ensure your access point has DHCP and internet connectivity enabled.</dd></dl>
<h2><a class="anchor" id="autotoc_md22"></a>
Verifying the result with a third party MQTT Client</h2>
<p >You can use a third party MQTT Client such as Mosquitto to independently verify the working of the application. You may download Mosquitto from <code><a href="https://mosquitto.org/download/">https://mosquitto.org/download/</a></code> </p>
<p >The above link also includes the Mosquitto MQTT server, which you may use to create a private MQTT broker for your application.</p>
<p >Run the mosquitto client using the following command: </p><div class="fragment"><div class="line">mosquitto_sub -h test.mosquitto.org -p 1883 -t /MorseMicro/&lt;clientid&gt;/topic</div>
</div><!-- fragment --><p> Replace <code>"&lt;clientid&gt;"</code> with the client id of your device as displayed on the console.</p>
<p >Now run the application. You should see the message <em>G'day World!</em> appear on the MQTT client which confirms that the application has successfully connected to the MQTT broker and published a message.</p>
<dl class="section note"><dt>Note</dt><dd>You may use <code>mosquitto_pub</code> to publish messages too. Documentation for <code>mosquitto_sub</code> is here: <code><a href="https://mosquitto.org/man/mosquitto_sub-1.html">https://mosquitto.org/man/mosquitto_sub-1.html</a></code>. And documentation for mosquitto_pub is here: <code><a href="https://mosquitto.org/man/mosquitto_pub-1.html">https://mosquitto.org/man/mosquitto_pub-1.html</a></code>.</dd></dl>
<h2><a class="anchor" id="autotoc_md23"></a>
Configuration</h2>
<p >See <a class="el" href="mm__app__common_8h.html#APP_COMMON_API">Application helper routines for Wireless LAN interface</a> for details of WLAN and IP stack configuration. Additional configuration options for this application can be found in the config.hjson file.</p>
<h1><a class="anchor" id="autotoc_md24"></a>
Troubleshooting</h1>
<h2><a class="anchor" id="autotoc_md25"></a>
Connecting to server socket failed with code 7</h2>
<p >The most common cause of this issue is AP configuration problems. Check if your device has access to the internet via your HaLow AP.</p>
<p >Another possible cause is a tcp socket timeout, which can occur due to issues on the broker side. If this occurs when using FreeRTOS+TCP as your IP stack, try increasing the <code>ipconfigSOCK_DEFAULT_RECEIVE_BLOCK_TIME</code> to allow the socket more time to receive a response.</p>
<p >If this error keeps occurring, try setting up a local MQTT broker and changing <a class="el" href="mqttdemo_8c.html#aba50a3461ccecccfb352105d84563a2d">MQTT_BROKER_ENDPOINT</a> to your computer's IP address.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Creating MQTT connection with broker failed with code 7</h2>
<p >The main cause of this issue is issues with the Mosquitto test server, which can sometimes fail to respond before <a class="el" href="mqttdemo_8c.html#acbc052b56b092d68cfe96267e79936ef">CONNACK_RECV_TIMEOUT_MS</a>. Try increasing the timeout, or if the problem persists, try setting up a local MQTT broker and changing <a class="el" href="mqttdemo_8c.html#aba50a3461ccecccfb352105d84563a2d">MQTT_BROKER_ENDPOINT</a> to your computer's IP address. </p>

<p class="definition">Definition in file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>
</div><div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;mmosal.h&quot;</code><br />
<code>#include &quot;mmwlan.h&quot;</code><br />
<code>#include &quot;mmconfig.h&quot;</code><br />
<code>#include &quot;mmipal.h&quot;</code><br />
<code>#include &quot;mbedtls/build_info.h&quot;</code><br />
<code>#include &quot;mbedtls/platform.h&quot;</code><br />
<code>#include &quot;mbedtls/net.h&quot;</code><br />
<code>#include &quot;mbedtls/ssl.h&quot;</code><br />
<code>#include &quot;mbedtls/entropy.h&quot;</code><br />
<code>#include &quot;mbedtls/ctr_drbg.h&quot;</code><br />
<code>#include &quot;mbedtls/debug.h&quot;</code><br />
<code>#include &quot;core_mqtt.h&quot;</code><br />
<code>#include &quot;mm_app_common.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mqttdemo.c:</div>
<div class="dyncontent">
<div class="center"><img src="mqttdemo_8c__incl.png" border="0" usemap="#amqttdemo_8c" alt=""/></div>
<map name="amqttdemo_8c" id="amqttdemo_8c">
<area shape="rect" title="MQTT example to demonstrate connecting to an MQTT broker, subscribing to a topic and publishing to a ..." alt="" coords="986,5,1087,32"/>
<area shape="rect" title=" " alt="" coords="5,304,76,331"/>
<area shape="rect" href="mmosal_8h_source.html" title=" " alt="" coords="157,229,244,256"/>
<area shape="rect" href="mmwlan_8h_source.html" title=" " alt="" coords="355,80,446,107"/>
<area shape="rect" href="mmconfig_8h_source.html" title=" " alt="" coords="545,155,643,181"/>
<area shape="rect" href="mmipal_8h_source.html" title=" " alt="" coords="717,229,801,256"/>
<area shape="rect" title=" " alt="" coords="709,80,863,107"/>
<area shape="rect" title=" " alt="" coords="887,80,1034,107"/>
<area shape="rect" title=" " alt="" coords="1058,80,1170,107"/>
<area shape="rect" title=" " alt="" coords="1194,80,1303,107"/>
<area shape="rect" title=" " alt="" coords="1327,80,1466,107"/>
<area shape="rect" title=" " alt="" coords="1490,80,1634,107"/>
<area shape="rect" title=" " alt="" coords="1658,80,1789,107"/>
<area shape="rect" title=" " alt="" coords="1813,80,1913,107"/>
<area shape="rect" title=" " alt="" coords="1937,80,2091,107"/>
<area shape="rect" title=" " alt="" coords="638,304,721,331"/>
<area shape="rect" title=" " alt="" coords="397,304,468,331"/>
<area shape="rect" title=" " alt="" coords="101,304,167,331"/>
<area shape="rect" title=" " alt="" coords="303,304,373,331"/>
<area shape="rect" title=" " alt="" coords="192,304,279,331"/>
<area shape="rect" title=" " alt="" coords="289,155,363,181"/>
<area shape="rect" href="mmpkt_8h_source.html" title=" " alt="" coords="439,155,520,181"/>
<area shape="rect" title=" " alt="" coords="517,229,591,256"/>
</map>
</div>
</div>
<p><a href="mqttdemo_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9678aeec976e433841fe96834f83ab99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a9678aeec976e433841fe96834f83ab99">CLIENT_ID_PREFIX</a>&#160;&#160;&#160;&quot;MM_Client_%s&quot;</td></tr>
<tr class="memdesc:a9678aeec976e433841fe96834f83ab99"><td class="mdescLeft">&#160;</td><td class="mdescRight">The MQTT client identifier used in this example.  <a href="mqttdemo_8c.html#a9678aeec976e433841fe96834f83ab99">More...</a><br /></td></tr>
<tr class="separator:a9678aeec976e433841fe96834f83ab99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba50a3461ccecccfb352105d84563a2d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#aba50a3461ccecccfb352105d84563a2d">MQTT_BROKER_ENDPOINT</a>&#160;&#160;&#160;&quot;test.mosquitto.org&quot;</td></tr>
<tr class="memdesc:aba50a3461ccecccfb352105d84563a2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broker address to connect to.  <a href="mqttdemo_8c.html#aba50a3461ccecccfb352105d84563a2d">More...</a><br /></td></tr>
<tr class="separator:aba50a3461ccecccfb352105d84563a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8da4bdd90d82e2a8498f3fb429fed744"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a8da4bdd90d82e2a8498f3fb429fed744">MQTT_BROKER_PORT</a>&#160;&#160;&#160;1883</td></tr>
<tr class="memdesc:a8da4bdd90d82e2a8498f3fb429fed744"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broker port.  <a href="mqttdemo_8c.html#a8da4bdd90d82e2a8498f3fb429fed744">More...</a><br /></td></tr>
<tr class="separator:a8da4bdd90d82e2a8498f3fb429fed744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cd6f2b1e2766a15f38e58d5d32adce9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a7cd6f2b1e2766a15f38e58d5d32adce9">KEEP_ALIVE_TIMEOUT_SECONDS</a>&#160;&#160;&#160;60</td></tr>
<tr class="memdesc:a7cd6f2b1e2766a15f38e58d5d32adce9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Keep alive Delay.  <a href="mqttdemo_8c.html#a7cd6f2b1e2766a15f38e58d5d32adce9">More...</a><br /></td></tr>
<tr class="separator:a7cd6f2b1e2766a15f38e58d5d32adce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc052b56b092d68cfe96267e79936ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#acbc052b56b092d68cfe96267e79936ef">CONNACK_RECV_TIMEOUT_MS</a>&#160;&#160;&#160;10000</td></tr>
<tr class="memdesc:acbc052b56b092d68cfe96267e79936ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive timeout.  <a href="mqttdemo_8c.html#acbc052b56b092d68cfe96267e79936ef">More...</a><br /></td></tr>
<tr class="separator:acbc052b56b092d68cfe96267e79936ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc89d18fbf89325385af2bb339deb9a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a5fc89d18fbf89325385af2bb339deb9a">DELAY_BETWEEN_PUBLISHES</a>&#160;&#160;&#160;1000</td></tr>
<tr class="memdesc:a5fc89d18fbf89325385af2bb339deb9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override the default FreeRTOS + TCP receive socket timeouts, as the test server can be slow to respond.  <a href="mqttdemo_8c.html#a5fc89d18fbf89325385af2bb339deb9a">More...</a><br /></td></tr>
<tr class="separator:a5fc89d18fbf89325385af2bb339deb9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c3aa778b25387dabaabf18f3cd4c5b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">TOPIC_COUNT</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a6c3aa778b25387dabaabf18f3cd4c5b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of topics we subscribe to.  <a href="mqttdemo_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">More...</a><br /></td></tr>
<tr class="separator:a6c3aa778b25387dabaabf18f3cd4c5b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa609a7469e5afd021b9378cd092df244"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#aa609a7469e5afd021b9378cd092df244">TOPIC_FORMAT</a>&#160;&#160;&#160;&quot;/MorseMicro/%s/topic&quot;</td></tr>
<tr class="memdesc:aa609a7469e5afd021b9378cd092df244"><td class="mdescLeft">&#160;</td><td class="mdescRight">Topic to publish/subscribe, we include the client ID to keep it unique.  <a href="mqttdemo_8c.html#aa609a7469e5afd021b9378cd092df244">More...</a><br /></td></tr>
<tr class="separator:aa609a7469e5afd021b9378cd092df244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2862417570313cea3cad7ffd82d290b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a2862417570313cea3cad7ffd82d290b2">EXAMPLE_MESSAGE</a>&#160;&#160;&#160;&quot;G'day World!&quot;</td></tr>
<tr class="memdesc:a2862417570313cea3cad7ffd82d290b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message to publish/subscribe.  <a href="mqttdemo_8c.html#a2862417570313cea3cad7ffd82d290b2">More...</a><br /></td></tr>
<tr class="separator:a2862417570313cea3cad7ffd82d290b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f6489cce566173b82ac72b1218621e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a1f6489cce566173b82ac72b1218621e3">MAC_ADDR_STR_LEN</a>&#160;&#160;&#160;(18)</td></tr>
<tr class="memdesc:a1f6489cce566173b82ac72b1218621e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of MAC address string (i.e., "XX:XX:XX:XX:XX:XX") including terminator.  <a href="mqttdemo_8c.html#a1f6489cce566173b82ac72b1218621e3">More...</a><br /></td></tr>
<tr class="separator:a1f6489cce566173b82ac72b1218621e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a63a3c8737a8eae56fbc3681176c29634"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a63a3c8737a8eae56fbc3681176c29634">MQTTProcessIncomingPublish</a> (MQTTPublishInfo_t *pxPublishInfo)</td></tr>
<tr class="memdesc:a63a3c8737a8eae56fbc3681176c29634"><td class="mdescLeft">&#160;</td><td class="mdescRight">This callback gets called when a published message matches one of our subscribed topics.  <a href="mqttdemo_8c.html#a63a3c8737a8eae56fbc3681176c29634">More...</a><br /></td></tr>
<tr class="separator:a63a3c8737a8eae56fbc3681176c29634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfd89053348457e100403d970721ca01"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#adfd89053348457e100403d970721ca01">MQTTProcessResponse</a> (MQTTPacketInfo_t *pxIncomingPacket, uint16_t usPacketId)</td></tr>
<tr class="memdesc:adfd89053348457e100403d970721ca01"><td class="mdescLeft">&#160;</td><td class="mdescRight">This callback gets called whenever we receive an <code>ACK</code> from the server.  <a href="mqttdemo_8c.html#adfd89053348457e100403d970721ca01">More...</a><br /></td></tr>
<tr class="separator:adfd89053348457e100403d970721ca01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6923a8617272e1c2115b4c23dd7f154b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a6923a8617272e1c2115b4c23dd7f154b">EventCallback</a> (MQTTContext_t *pxMQTTContext, MQTTPacketInfo_t *pxPacketInfo, MQTTDeserializedInfo_t *pxDeserializedInfo)</td></tr>
<tr class="memdesc:a6923a8617272e1c2115b4c23dd7f154b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a callback from MQTT_Process whenever a packet is received from the server.  <a href="mqttdemo_8c.html#a6923a8617272e1c2115b4c23dd7f154b">More...</a><br /></td></tr>
<tr class="separator:a6923a8617272e1c2115b4c23dd7f154b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a878a48c8612c146c8075936f6523e00a"><td class="memItemLeft" align="right" valign="top">MQTTStatus_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a878a48c8612c146c8075936f6523e00a">CreateMQTTConnectionToBroker</a> (MQTTContext_t *pxMQTTContext, NetworkContext_t *pxNetworkContext, char *clientID)</td></tr>
<tr class="memdesc:a878a48c8612c146c8075936f6523e00a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an MQTT connection with the server.  <a href="mqttdemo_8c.html#a878a48c8612c146c8075936f6523e00a">More...</a><br /></td></tr>
<tr class="separator:a878a48c8612c146c8075936f6523e00a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ce127c156403e783731b7de90b01b6a"><td class="memItemLeft" align="right" valign="top">MQTTStatus_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a3ce127c156403e783731b7de90b01b6a">MQTTSubscribe</a> (MQTTContext_t *pxMQTTContext, const char *topic)</td></tr>
<tr class="memdesc:a3ce127c156403e783731b7de90b01b6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribes to the specified topic.  <a href="mqttdemo_8c.html#a3ce127c156403e783731b7de90b01b6a">More...</a><br /></td></tr>
<tr class="separator:a3ce127c156403e783731b7de90b01b6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56c439cd6b0ba7b66c7502a26ed10ea0"><td class="memItemLeft" align="right" valign="top">MQTTStatus_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a56c439cd6b0ba7b66c7502a26ed10ea0">MQTTUnsubscribeFromTopic</a> (MQTTContext_t *pxMQTTContext, const char *topic)</td></tr>
<tr class="memdesc:a56c439cd6b0ba7b66c7502a26ed10ea0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsubscribes from the specified topic.  <a href="mqttdemo_8c.html#a56c439cd6b0ba7b66c7502a26ed10ea0">More...</a><br /></td></tr>
<tr class="separator:a56c439cd6b0ba7b66c7502a26ed10ea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67fc2838808735917ce9bf3b516ff850"><td class="memItemLeft" align="right" valign="top">MQTTStatus_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a67fc2838808735917ce9bf3b516ff850">MQTTPublishToTopic</a> (MQTTContext_t *pxMQTTContext, const char *topic, void *payload, size_t payloadLength)</td></tr>
<tr class="memdesc:a67fc2838808735917ce9bf3b516ff850"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a message to the specified MQTT topic.  <a href="mqttdemo_8c.html#a67fc2838808735917ce9bf3b516ff850">More...</a><br /></td></tr>
<tr class="separator:a67fc2838808735917ce9bf3b516ff850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add3190cf715f513666f4be42874d91e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#add3190cf715f513666f4be42874d91e2">app_init</a> (void)</td></tr>
<tr class="memdesc:add3190cf715f513666f4be42874d91e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main entry point to the application.  <a href="mqttdemo_8c.html#add3190cf715f513666f4be42874d91e2">More...</a><br /></td></tr>
<tr class="separator:add3190cf715f513666f4be42874d91e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8d0196caa4b00a1c9678508b882b33ee"><td class="memItemLeft" align="right" valign="top">static unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mqttdemo_8c.html#a8d0196caa4b00a1c9678508b882b33ee">buf</a> [1024]</td></tr>
<tr class="memdesc:a8d0196caa4b00a1c9678508b882b33ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statically allocated buffer for MQTT.  <a href="mqttdemo_8c.html#a8d0196caa4b00a1c9678508b882b33ee">More...</a><br /></td></tr>
<tr class="separator:a8d0196caa4b00a1c9678508b882b33ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a9678aeec976e433841fe96834f83ab99" name="a9678aeec976e433841fe96834f83ab99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9678aeec976e433841fe96834f83ab99">&#9670;&nbsp;</a></span>CLIENT_ID_PREFIX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLIENT_ID_PREFIX&#160;&#160;&#160;&quot;MM_Client_%s&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The MQTT client identifier used in this example. </p>
<p >Each client identifier must be unique to ensure no two clients connecting to the same broker use the same client identifier. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00116">116</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="acbc052b56b092d68cfe96267e79936ef" name="acbc052b56b092d68cfe96267e79936ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbc052b56b092d68cfe96267e79936ef">&#9670;&nbsp;</a></span>CONNACK_RECV_TIMEOUT_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONNACK_RECV_TIMEOUT_MS&#160;&#160;&#160;10000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive timeout. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00134">134</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a5fc89d18fbf89325385af2bb339deb9a" name="a5fc89d18fbf89325385af2bb339deb9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fc89d18fbf89325385af2bb339deb9a">&#9670;&nbsp;</a></span>DELAY_BETWEEN_PUBLISHES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DELAY_BETWEEN_PUBLISHES&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Override the default FreeRTOS + TCP receive socket timeouts, as the test server can be slow to respond. </p>
<p >Delay in ms between publishes </p><dl class="section note"><dt>Note</dt><dd>This is a single threaded demo, so increasing this delay will cause the application to sleep for extended periods of time and not respond to other messages. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00148">148</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a2862417570313cea3cad7ffd82d290b2" name="a2862417570313cea3cad7ffd82d290b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2862417570313cea3cad7ffd82d290b2">&#9670;&nbsp;</a></span>EXAMPLE_MESSAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXAMPLE_MESSAGE&#160;&#160;&#160;&quot;G'day World!&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Message to publish/subscribe. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00157">157</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a7cd6f2b1e2766a15f38e58d5d32adce9" name="a7cd6f2b1e2766a15f38e58d5d32adce9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cd6f2b1e2766a15f38e58d5d32adce9">&#9670;&nbsp;</a></span>KEEP_ALIVE_TIMEOUT_SECONDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KEEP_ALIVE_TIMEOUT_SECONDS&#160;&#160;&#160;60</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Keep alive Delay. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00132">132</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a1f6489cce566173b82ac72b1218621e3" name="a1f6489cce566173b82ac72b1218621e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f6489cce566173b82ac72b1218621e3">&#9670;&nbsp;</a></span>MAC_ADDR_STR_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAC_ADDR_STR_LEN&#160;&#160;&#160;(18)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Length of MAC address string (i.e., "XX:XX:XX:XX:XX:XX") including terminator. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00159">159</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="aba50a3461ccecccfb352105d84563a2d" name="aba50a3461ccecccfb352105d84563a2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba50a3461ccecccfb352105d84563a2d">&#9670;&nbsp;</a></span>MQTT_BROKER_ENDPOINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_BROKER_ENDPOINT&#160;&#160;&#160;&quot;test.mosquitto.org&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Broker address to connect to. </p>
<p >This is a public test server and is not guaranteed to be always available. For production applications or extensive testing you should setup your own server. Mosquitto is one such free MQTT server that you can use. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00123">123</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a8da4bdd90d82e2a8498f3fb429fed744" name="a8da4bdd90d82e2a8498f3fb429fed744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8da4bdd90d82e2a8498f3fb429fed744">&#9670;&nbsp;</a></span>MQTT_BROKER_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_BROKER_PORT&#160;&#160;&#160;1883</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Broker port. </p>
<p >Usually 1883 is used for communications in the clear and 8883 is used for TLS encrypted communications. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00128">128</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a6c3aa778b25387dabaabf18f3cd4c5b0" name="a6c3aa778b25387dabaabf18f3cd4c5b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c3aa778b25387dabaabf18f3cd4c5b0">&#9670;&nbsp;</a></span>TOPIC_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOPIC_COUNT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of topics we subscribe to. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00151">151</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="aa609a7469e5afd021b9378cd092df244" name="aa609a7469e5afd021b9378cd092df244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa609a7469e5afd021b9378cd092df244">&#9670;&nbsp;</a></span>TOPIC_FORMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOPIC_FORMAT&#160;&#160;&#160;&quot;/MorseMicro/%s/topic&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Topic to publish/subscribe, we include the client ID to keep it unique. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00154">154</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="add3190cf715f513666f4be42874d91e2" name="add3190cf715f513666f4be42874d91e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add3190cf715f513666f4be42874d91e2">&#9670;&nbsp;</a></span>app_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void app_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main entry point to the application. </p>
<p >This will be invoked in a thread once operating system and hardware initialization has completed. It may return, but it does not have to. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00464">464</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a878a48c8612c146c8075936f6523e00a" name="a878a48c8612c146c8075936f6523e00a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a878a48c8612c146c8075936f6523e00a">&#9670;&nbsp;</a></span>CreateMQTTConnectionToBroker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MQTTStatus_t CreateMQTTConnectionToBroker </td>
          <td>(</td>
          <td class="paramtype">MQTTContext_t *&#160;</td>
          <td class="paramname"><em>pxMQTTContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NetworkContext_t *&#160;</td>
          <td class="paramname"><em>pxNetworkContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>clientID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an MQTT connection with the server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pxMQTTContext</td><td>The MQTT context </td></tr>
    <tr><td class="paramname">pxNetworkContext</td><td>The network context (socket) </td></tr>
    <tr><td class="paramname">clientID</td><td>Our unique Client ID string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns <code>MQTTSuccess</code> on success, else returns error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00281">281</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a6923a8617272e1c2115b4c23dd7f154b" name="a6923a8617272e1c2115b4c23dd7f154b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6923a8617272e1c2115b4c23dd7f154b">&#9670;&nbsp;</a></span>EventCallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void EventCallback </td>
          <td>(</td>
          <td class="paramtype">MQTTContext_t *&#160;</td>
          <td class="paramname"><em>pxMQTTContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MQTTPacketInfo_t *&#160;</td>
          <td class="paramname"><em>pxPacketInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MQTTDeserializedInfo_t *&#160;</td>
          <td class="paramname"><em>pxDeserializedInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is a callback from MQTT_Process whenever a packet is received from the server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pxMQTTContext</td><td>The MQTT context </td></tr>
    <tr><td class="paramname">pxPacketInfo</td><td>The packet info </td></tr>
    <tr><td class="paramname">pxDeserializedInfo</td><td>The de-serialized packet info </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00257">257</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a63a3c8737a8eae56fbc3681176c29634" name="a63a3c8737a8eae56fbc3681176c29634"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63a3c8737a8eae56fbc3681176c29634">&#9670;&nbsp;</a></span>MQTTProcessIncomingPublish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MQTTProcessIncomingPublish </td>
          <td>(</td>
          <td class="paramtype">MQTTPublishInfo_t *&#160;</td>
          <td class="paramname"><em>pxPublishInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This callback gets called when a published message matches one of our subscribed topics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pxPublishInfo</td><td>The received message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00170">170</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="adfd89053348457e100403d970721ca01" name="adfd89053348457e100403d970721ca01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfd89053348457e100403d970721ca01">&#9670;&nbsp;</a></span>MQTTProcessResponse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MQTTProcessResponse </td>
          <td>(</td>
          <td class="paramtype">MQTTPacketInfo_t *&#160;</td>
          <td class="paramname"><em>pxIncomingPacket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>usPacketId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This callback gets called whenever we receive an <code>ACK</code> from the server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pxIncomingPacket</td><td>The incoming packet </td></tr>
    <tr><td class="paramname">usPacketId</td><td>The packet ID </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00205">205</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a67fc2838808735917ce9bf3b516ff850" name="a67fc2838808735917ce9bf3b516ff850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67fc2838808735917ce9bf3b516ff850">&#9670;&nbsp;</a></span>MQTTPublishToTopic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MQTTStatus_t MQTTPublishToTopic </td>
          <td>(</td>
          <td class="paramtype">MQTTContext_t *&#160;</td>
          <td class="paramname"><em>pxMQTTContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payloadLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a message to the specified MQTT topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pxMQTTContext</td><td>The MQTT context </td></tr>
    <tr><td class="paramname">topic</td><td>The topic top publish to </td></tr>
    <tr><td class="paramname">payload</td><td>A pointer to the binary or text data to publish </td></tr>
    <tr><td class="paramname">payloadLength</td><td>The length of the data to publish </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns <code>MQTTSuccess</code> on success, else returns error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00437">437</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a3ce127c156403e783731b7de90b01b6a" name="a3ce127c156403e783731b7de90b01b6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ce127c156403e783731b7de90b01b6a">&#9670;&nbsp;</a></span>MQTTSubscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MQTTStatus_t MQTTSubscribe </td>
          <td>(</td>
          <td class="paramtype">MQTTContext_t *&#160;</td>
          <td class="paramname"><em>pxMQTTContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subscribes to the specified topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pxMQTTContext</td><td>The MQTT context </td></tr>
    <tr><td class="paramname">topic</td><td>The topic to subscribe to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns <code>MQTTSuccess</code> on success, else returns error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00348">348</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<a id="a56c439cd6b0ba7b66c7502a26ed10ea0" name="a56c439cd6b0ba7b66c7502a26ed10ea0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56c439cd6b0ba7b66c7502a26ed10ea0">&#9670;&nbsp;</a></span>MQTTUnsubscribeFromTopic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MQTTStatus_t MQTTUnsubscribeFromTopic </td>
          <td>(</td>
          <td class="paramtype">MQTTContext_t *&#160;</td>
          <td class="paramname"><em>pxMQTTContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsubscribes from the specified topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pxMQTTContext</td><td>The MQTT context </td></tr>
    <tr><td class="paramname">topic</td><td>The topic to unsubscribe from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns <code>MQTTSuccess</code> on success, else returns error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00399">399</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a8d0196caa4b00a1c9678508b882b33ee" name="a8d0196caa4b00a1c9678508b882b33ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d0196caa4b00a1c9678508b882b33ee">&#9670;&nbsp;</a></span>buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char buf[1024]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Statically allocated buffer for MQTT. </p>

<p class="definition">Definition at line <a class="el" href="mqttdemo_8c_source.html#l00162">162</a> of file <a class="el" href="mqttdemo_8c_source.html">mqttdemo.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d570c7de7a367bd1f24cd66faf59ca3f.html">examples</a></li><li class="navelem"><a class="el" href="dir_a2719ecc0f51dbc0621b6bbad312c280.html">mqttdemo</a></li><li class="navelem"><a class="el" href="dir_fa593966915b9848a02ecda0c7bfaebb.html">src</a></li><li class="navelem"><a class="el" href="mqttdemo_8c.html">mqttdemo.c</a></li>
    <li class="footer">Copyright 2021 Morse Micro </li>
  </ul>
</div>
</body>
</html>
