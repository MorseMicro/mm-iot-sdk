<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Morse Micro IoT SDK: Morse Micro Embedded Test Engine (Emmet)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="favicon.svg" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Morse Micro IoT SDK
   &#160;<span id="projectnumber">2.7.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__EMMET.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Morse Micro Embedded Test Engine (Emmet)</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Emmet is a firmware subsystem that allows various aspects of the firmware to be driven by a connected computer. </p>
<p >This is intended as an aid for development and automated test.</p>
<dl class="section warning"><dt>Warning</dt><dd>Emmet provides access to internal functionality and credentials that would result in a security risk if used in a production device.</dd></dl>
<p>Examples of functionality that can be driven by Emmet include:</p>
<ul>
<li>Connect to an AP</li>
<li>Disconnect from an AP</li>
<li>Read connection state</li>
<li>Ping a remote host on the network</li>
<li>Start an Iperf client or server</li>
</ul>
<p >A high-level block diagram of how Emmet fits into the overall firmware architecture is shown below. Emmet provides an API to an connected computer, interfaced via the debug interface of the MCU, that is able invoke functions at various layers of the firmware stack.</p>
 <div class="image">
<img src="emmet-blockdiag.png" alt=""/>
<div class="caption">
Emmet block diagram</div></div>
<p >The Emmet Control API (Ace) is a Python library that abstracts away the details of the protocol used by the PC to communicate with the Emmet subsystem via OpenOCD, and provides an easy-to-use interface to the Emmet API. This enables control scripts to be written in Python, examples of which are provided as part of this SDK.</p>
<h1><a class="anchor" id="EMMET_ENABLE"></a>
Enabling Emmet support in application firmware</h1>
<p >There are two aspects to enabling Emmet support in an application. Firstly, the application must invoke <a class="el" href="group__EMMET.html#gac1ce8a05fdfec7a0d2ffde6cd6d93d6b">emmet_init()</a> to initialize Emmet, and <a class="el" href="group__EMMET.html#ga24d1640c6cb9337d9ca9b070f90f92dd">emmet_start()</a> to start Emmet.</p>
<p >Secondly, the <code></code>.emmet_hostif_table section must be located at address <code>0x20000400</code>. (Note that a different address may be used if it is not possible to locate <code></code>.emmet_hostif_table at this address then, but it will be necessary to update the Python API.)</p>
<p >The following code can be added to the platform linker script to place the <code></code>.emmet_hostif_table section at the correct location:</p>
<div class="fragment"><div class="line">PROVIDE (_emmet_hostif_table_base_address = 0x20000400);</div>
<div class="line">.emmet_hostif_table _emmet_hostif_table_base_address (NOLOAD) :</div>
<div class="line">{</div>
<div class="line">    *(.emmet_hostif_table)</div>
<div class="line">} &gt; RAM</div>
</div><!-- fragment --><p >Note that the linker script provided with the SDK includes the above code snippet so that the Emmet section is located at the correct address.</p>
<h1><a class="anchor" id="EMMET_SCRIPTS"></a>
Example control scripts</h1>
<p >A number of Python scripts are provided in the <code>tools/ace/examples</code> directory. These can be used to perform various operations from the command line. See <a class="el" href="emmet_8c.html#EMMET_APP_HOWTO">How to use the Emmet example application</a> for more. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac1ce8a05fdfec7a0d2ffde6cd6d93d6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__EMMET.html#gac1ce8a05fdfec7a0d2ffde6cd6d93d6b">emmet_init</a> (void)</td></tr>
<tr class="memdesc:gac1ce8a05fdfec7a0d2ffde6cd6d93d6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Emmet.  <a href="group__EMMET.html#gac1ce8a05fdfec7a0d2ffde6cd6d93d6b">More...</a><br /></td></tr>
<tr class="separator:gac1ce8a05fdfec7a0d2ffde6cd6d93d6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24d1640c6cb9337d9ca9b070f90f92dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__EMMET.html#ga24d1640c6cb9337d9ca9b070f90f92dd">emmet_start</a> (void)</td></tr>
<tr class="memdesc:ga24d1640c6cb9337d9ca9b070f90f92dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start Emmet.  <a href="group__EMMET.html#ga24d1640c6cb9337d9ca9b070f90f92dd">More...</a><br /></td></tr>
<tr class="separator:ga24d1640c6cb9337d9ca9b070f90f92dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4cd61571bf11a6fc262a0586a88d2092"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__MMWLAN.html#ga0039072000d47e5c3712686bf1e43086">mmwlan_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__EMMET.html#ga4cd61571bf11a6fc262a0586a88d2092">emmet_set_reg_db</a> (const struct <a class="el" href="structmmwlan__regulatory__db.html">mmwlan_regulatory_db</a> *reg_db)</td></tr>
<tr class="memdesc:ga4cd61571bf11a6fc262a0586a88d2092"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the regulatory database for Emmet to use.  <a href="group__EMMET.html#ga4cd61571bf11a6fc262a0586a88d2092">More...</a><br /></td></tr>
<tr class="separator:ga4cd61571bf11a6fc262a0586a88d2092"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac1ce8a05fdfec7a0d2ffde6cd6d93d6b" name="gac1ce8a05fdfec7a0d2ffde6cd6d93d6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1ce8a05fdfec7a0d2ffde6cd6d93d6b">&#9670;&nbsp;</a></span>emmet_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emmet_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Emmet. </p>
<p >This will zero the host interface table but will not set the magic number, so it will not accept commands from the host until <a class="el" href="group__EMMET.html#ga24d1640c6cb9337d9ca9b070f90f92dd">emmet_start()</a> is invoked. </p>

</div>
</div>
<a id="ga4cd61571bf11a6fc262a0586a88d2092" name="ga4cd61571bf11a6fc262a0586a88d2092"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4cd61571bf11a6fc262a0586a88d2092">&#9670;&nbsp;</a></span>emmet_set_reg_db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__MMWLAN.html#ga0039072000d47e5c3712686bf1e43086">mmwlan_status</a> emmet_set_reg_db </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structmmwlan__regulatory__db.html">mmwlan_regulatory_db</a> *&#160;</td>
          <td class="paramname"><em>reg_db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the regulatory database for Emmet to use. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg_db</td><td>The regulatory database to use. Must remain valid in memory.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>MMWLAN_SUCCESS</code> on success, or another relevant error code. </dd></dl>

</div>
</div>
<a id="ga24d1640c6cb9337d9ca9b070f90f92dd" name="ga24d1640c6cb9337d9ca9b070f90f92dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga24d1640c6cb9337d9ca9b070f90f92dd">&#9670;&nbsp;</a></span>emmet_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emmet_start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start Emmet. </p>
<p >This will set the magic number in the host interface table so that the host knows it can now begin sending commands to Emmet. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright 2021 Morse Micro </li>
  </ul>
</div>
</body>
</html>
