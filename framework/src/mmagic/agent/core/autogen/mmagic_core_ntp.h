/*
 * Copyright 2025 Morse Micro
 *
 * SPDX-License-Identifier: Apache-2.0
 *
 * Warning: this file is autogenerated. Do not modify by hand.
 */

#pragma once

#include "mmagic_core_types.h"

struct mmagic_data;

struct mmagic_ntp_config
{
    /** The hostname or IP of the NTP server. Defaults to "0.pool.ntp.org". */
    struct string254 server;
};

struct mmagic_ntp_data
{
    struct mmagic_ntp_config config;
};

/**
 * Function to initialize the core data structure and register the ops functions.
 *
 * @param core Reference to to global mmagic context struct.
 */
void mmagic_core_ntp_init(struct mmagic_data *core);

/**
 * Function to load settings from persistent store for the core ntp subsystem.
 *
 * @param core Reference to to global mmagic context struct.
 */
void mmagic_core_ntp_load_all(struct mmagic_data *core);

/**
 * Function to save settings to persistent store for the core ntp subsystem.
 *
 * @param core Reference to to global mmagic context struct.
 */
void mmagic_core_ntp_save_all(struct mmagic_data *core);

/**
 * Function to start any of the core processes for the core ntp subsystem.
 *
 * @param core Reference to to global mmagic context struct.
 */
void mmagic_core_ntp_start(struct mmagic_data *core);

enum mmagic_status mmagic_core_ntp_sync(
    struct mmagic_data *core);

/** Response arguments structure for ntp_get_time */
struct MM_PACKED mmagic_core_ntp_get_time_rsp_args
{
    uint64_t timestamp;
};

enum mmagic_status mmagic_core_ntp_get_time(
    struct mmagic_data *core,
    struct mmagic_core_ntp_get_time_rsp_args *rsp_args);
